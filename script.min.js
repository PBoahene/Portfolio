document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("navToggle"),t=document.querySelector(".nav-list"),n=document.querySelectorAll(".nav-link");e.addEventListener("click",function(){const o=t.classList.toggle("open");e.classList.toggle("open",o),e.setAttribute("aria-expanded",o)}),n.forEach(e=>e.addEventListener("click",function(){t.classList.remove("open"),e.classList.remove("open"),document.getElementById("navToggle").setAttribute("aria-expanded","false")})),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){const n=this.getAttribute("href");if(n&&n.length>1){const o=document.querySelector(n);o&&(t.preventDefault(),o.scrollIntoView({behavior:"smooth",block:"start"}))}})});const o=document.querySelectorAll("main section[id]"),c={root:null,rootMargin:"0px",threshold:.55},r=new IntersectionObserver(function(e){e.forEach(e=>{const t=e.target.getAttribute("id"),n=document.querySelector('.nav-link[href="#'+t+'"]');e.isIntersecting&&(document.querySelectorAll('.nav-link').forEach(e=>e.classList.remove("active")),n&&n.classList.add("active"))})},c);o.forEach(e=>r.observe(e));const a=document.getElementById("contactForm");a&&a.addEventListener("submit",async function(e){e.preventDefault();const t={name:a.name.value.trim(),email:a.email.value.trim(),message:a.message.value.trim()};let n=!1;for(const o of ["/api/sendEmail","/.netlify/functions/sendEmail","/api/send"])try{const e=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(e.ok){const t=await e.json().catch(()=>({ok:!0}));alert(t.message||"Thanks — your message has been sent."),a.reset(),n=!0;break}}catch(e){}n||alert("Thanks — your message has been noted (demo). For real delivery, configure a serverless email function."),a.reset()});
